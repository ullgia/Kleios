@using Kleios.Frontend.Shared.Models
@using Kleios.Frontend.Shared.Services
@inject IMenuService MenuService

<MudNavMenu>
    @if (_menuItems != null)
    {
        @foreach (var menuItem in _menuItems)
        {
            if (menuItem.SubMenus.Count > 0)
            {
                <MudNavGroup Title="@menuItem.Title" Icon="@menuItem.Icon" Expanded="menuItem.IsDefaultOpen">
                    @foreach (var child in menuItem.SubMenus)
                    {
                        <MudNavLink Href="@child.Href" Icon="@child.Icon">@child.Title</MudNavLink>
                    }
                </MudNavGroup>
            }
            else
            {
                <MudNavLink Href="@menuItem.Href" Icon="@menuItem.Icon">@menuItem.Title</MudNavLink>
            }
        }
    }
</MudNavMenu>

@code {
    private List<MenuItem>? _menuItems;

    protected override async Task OnInitializedAsync()
    {
        _menuItems = await MenuService.GetMenuItemsAsync();
    }
}
